<!doctype html>
<html lang="en">

<head>
    <title>SmallRye Mutiny</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="SmallRye Mutiny!">

    <link rel="canonical" href="/pages/philosophy.html">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/icon.min.css" integrity="sha512-8Tb+T7SKUFQWOPIQCaLDWWe1K/SY8hvHl7brOH8Nz5z1VT8fnf8B+9neoUzmFY3OzkWMMs3OjrwZALgB1oXFBg==" crossorigin="anonymous" />
    <link rel="shortcut icon" type="image/png" href="/smallrye-mutiny/assets/images/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/smallrye-mutiny/assets/css/main.css" />
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
</head>

<body>
    <div class="container-fluid global-container">
        





<header class="header masthead mb-auto">
    <div class="container">
        <nav class="navbar navbar-dark navbar-expand-lg">
            <a class="navbar-brand brand mutiny" href="/smallrye-mutiny/index.html"><strong>Mutiny!</strong></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#toggler"
                    aria-controls="toggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="toggler">
                <ul class="navbar-nav ml-auto mr-0 mt-2 mt-lg-0">
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="/smallrye-mutiny/pages/philosophy">Philosophy</a></li>
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/getting-started/download">Getting started</a></li>
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/guides">Guides</a></li>
                    <li class="nav-item"><a href="https://github.com/smallrye/smallrye-mutiny" target="_blank" title="Github"><i
                            class="lab la-github la-2x"></i></a></li>
                    <li class="nav-item"><a href="https://groups.google.com/d/forum/smallrye" target="_blank" title="SmallRye Google Group"><i
                            class="las la-at la-2x"></i></a></li>
                    <li class="nav-item"><a href="https://stackoverflow.com/questions/tagged/mutiny" target="_blank"
                                            title="Stack Overflow"><i
                            class="lab la-stack-overflow la-2x"></i></a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>
        <main>
            <div class="content">
                <div class="container page-content">
<div class="row">    
    <div class="col-md-9">
        <div class="sect1">
<h2 id="concepts-philosophy"><a class="anchor" href="#concepts-philosophy"></a>Concepts &amp; Philosophy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mutiny is a novel reactive programming library.</p>
</div>
<div class="paragraph">
<p>It provides a simple but powerful asynchronous development model that lets you build reactive applications.</p>
</div>
<div class="paragraph">
<p>Mutiny can be used in any Java application exhibiting asynchrony.
From reactive microservices, data streaming, event processing to API gateways and network utilities, Mutiny is a great fit.</p>
</div>
<div class="sect2">
<h3 id="why-is-asynchronous-important"><a class="anchor" href="#why-is-asynchronous-important"></a>Why is asynchronous important?</h3>
<div class="paragraph">
<p>We are living in a distributed world.</p>
</div>
<div class="paragraph">
<p>Most of the applications built nowadays are distributed systems.
The Cloud, IoT, microservices, mobile application, even simple CRUD applications are distributed applications.</p>
</div>
<div class="paragraph">
<p>Still, developing distributed systems is hard!</p>
</div>
<div class="imageblock left">
<div class="content">
<img src="/smallrye-mutiny/assets/images/distributed-system-blueprint.png" alt="distributed system blueprint">
</div>
<div class="title">Figure 1. Distributed systems are asynchronous</div>
</div>
<div class="paragraph">
<p>Communications in distributed systems are inherently asynchronous and unreliable.
Anything can go wrong, anytime, and often with no prior notice.</p>
</div>
<div class="paragraph">
<p>Network disruptions, unavailable services, software, or hardware failures are just a tiny subset of the wide variety of failures that can happen in distributed systems.</p>
</div>
<div class="paragraph">
<p><em>Correctly</em> building distributed applications is a considerable challenge, as it requires re-assessing almost everything we know from traditional software development.</p>
</div>
<div class="paragraph">
<p>Most classic applications use a synchronous development model.
Synchronous code is easy to reason about, more comfortable to write and read than asynchronous code, but it has some hidden cost.
This cost emerges when building I/O intensive applications, quite common in distributed applications.</p>
</div>
<div class="paragraph">
<p>In general, these traditional applications assign one thread per request, and so they handle multiple concurrent requests with multiple threads.
When the request processing needs to interact over the network, it uses that <em>worker</em> thread, which blocks the thread until the response has been received.
This response may never come, so you need to add watchdogs handling timeouts and other resilience patterns.
And, to handle more requests concurrently, you need to create more threads.</p>
</div>
<div class="paragraph">
<p>Threads come at a cost.
Each thread requires memory, and the more threads you have, the more CPU cycles are used to handle the context switches.
Thus, this model ends up being costly, limits the deployment density, and on the Cloud means that you pay bigger bills.</p>
</div>
<div class="paragraph">
<p>Fortunately, there is another way, and it relies on non-blocking I/O, an efficient way to handle I/O interactions that do not require additional threads.
While applications using non-blocking I/O are more efficient and better suited for the Cloud&#8217;s distributed nature, they come with a considerable constraint: you must never block the I/O thread.
Thus, you need to implement your business logic using an asynchronous development model.</p>
</div>
<div class="paragraph">
<p>I/O is not the only reason why asynchronous is essential in Today&#8217;s systems.
Most of the interactions in the real world are asynchronous and event-driven.
Representing these interactions using synchronous processes is not only wrong; it also introduces fragility in your application.</p>
</div>
<div class="paragraph">
<p>Asynchronous is a significant shift.
Mutiny helps you to take the plunge.</p>
</div>
</div>
<div class="sect2">
<h3 id="whats-reactive-programming"><a class="anchor" href="#whats-reactive-programming"></a>What&#8217;s Reactive Programming?</h3>
<div class="paragraph">
<p>Mutiny is a reactive programming library.
If you look on Wikipedia for reactive programming, you will find the following definition:</p>
</div>
<div class="quoteblock">
<blockquote>
Reactive Programming combines functional programming, the observer pattern, and the iterable pattern.
</blockquote>
</div>
<div class="paragraph">
<p>While correct, we never found this definition very helpful.
It does not convey clearly what&#8217;s reactive programming is all about.
So, let&#8217;s make another definition, much more straightforward:</p>
</div>
<div class="quoteblock">
<blockquote>
Reactive programming is about programming with data streams.
</blockquote>
</div>
<div class="paragraph">
<p>That&#8217;s it.
Reactive programming is about streams and especially, observing them.
It pushes that idea to its limit: with reactive programming, everything is a data stream.</p>
</div>
<div class="paragraph">
<p>With reactive programming, you observe streams and implement side-effects when <em>something</em> flows in the stream:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="/smallrye-mutiny/assets/images/streams.png" alt="streams">
</div>
<div class="title">Figure 2. Reactive programming is about observing streams</div>
</div>
<div class="paragraph">
<p>It&#8217;s asynchronous by nature as you don&#8217;t know when the <em>data</em> is going to be seen.
Yet, reactive programming goes beyond this.
It provides a toolbox to compose streams and process events.</p>
</div>
</div>
<div class="sect2">
<h3 id="what-makes-mutiny-different"><a class="anchor" href="#what-makes-mutiny-different"></a>What makes Mutiny different?</h3>
<div class="paragraph">
<p>There are other reactive programming libraries out there.
In the Java world,  we can mention Project Reactor and Rx Java.</p>
</div>
<div class="paragraph">
<p>So, what makes Mutiny different from these two well-known libraries?
<strong>The API!</strong></p>
</div>
<div class="paragraph">
<p>As said above, asynchronous is hard to grasp for most developers, and for good reasons.
Thus, the API must not require advanced knowledge or add cognitive overload.
It should help you design your logic and still be intelligible in 6 months.</p>
</div>
<div class="paragraph">
<p>To achieve this, Mutiny is built on three pillars:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Event-Driven</strong> - with Mutiny, you listen for <em>events</em> and handle them,</p>
</li>
<li>
<p><strong>API Navigability</strong> - based on the event-driven nature, the API is built around the type of events and drive the navigation based on the kind of event you want to handle,</p>
</li>
<li>
<p><strong>Simplicity</strong> - Mutiny provides only two types (<code>Multi</code> and <code>Uni</code>), which can handle any kind of asynchronous interactions.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="events"><a class="anchor" href="#events"></a>Events?</h3>
<div class="paragraph">
<p>When you use Mutiny, you design a pipeline in which the events flow.
Your code observes these events and react.</p>
</div>
<div class="paragraph">
<p>Each processing stage is a new pipe you append to the pipeline.
This pipe may change the events, create new ones, drops, buffers, whatever you need.</p>
</div>
<div class="paragraph">
<p>In general, events flow from upstream to downstream, from source to sinks.
Some events can <em>swim</em> upstream from the sinks to the source.</p>
</div>
<div class="paragraph">
<p>Events going from upstream to downstream are published by <code>Publishers</code> and consumed by (downstream) <code>Subscribers,</code> which may also produce events for their own downstream, as illustrated by the following diagram:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="/smallrye-mutiny/assets/images/philosophy-chain.png" alt="philosophy chain">
</div>
</div>
<div class="paragraph">
<p>Four types of events can flow in this direction:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Subscribed</strong> - indicates that the upstream has taken into account the subscription - more on this later,</p>
</li>
<li>
<p><strong>Items</strong> - events containing some (business) <em>value</em>,</p>
</li>
<li>
<p><strong>Completion</strong> - event indicating that the source won&#8217;t emit any more items,</p>
</li>
<li>
<p><strong>Failure</strong> - event telling that something terrible happened upstream and that the source cannot continue to emit items.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>Failure</code> and <code>Completion</code> are terminal events.
Once they are sent, no more items will flow.</p>
</div>
<div class="paragraph">
<p>Three types of events flow in the opposite direction, <em>i.e.</em> from downstream to upstream:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Subscription</strong> - event sent by a <em>subscriber</em> to indicate its interest for the events (such as items) emitted by upstream</p>
</li>
<li>
<p><strong>Requests</strong> - event sent by a <em>subscriber</em> indicating how many items event it can handle - this is related to back-pressure</p>
</li>
<li>
<p><strong>Cancellation</strong> - event sent by a <em>subscriber</em> to stop the reception of events.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In a typical scenario:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A subscriber <em>subscribes</em> to the upstream - the upstream receive the <code>subscription request</code>, and when initialized sends the <code>subscribed</code> event to the subscriber</p>
</li>
<li>
<p>The subscriber gets the <code>subscribed</code> event with a <em>subscription</em> used to emit the <code>requests</code> and <code>cancellation</code> events</p>
</li>
<li>
<p>The subscriber sends a <code>request</code> event indicating how many items it can handle at this moment; it can request 1, <em>n</em>, or infinite.</p>
</li>
<li>
<p>The publisher receiving the <code>request</code> event starts emitting at most <em>n</em> item events to the subscriber</p>
</li>
<li>
<p>The subscriber can decide at any time to request more events or to cancel the subscription</p>
</li>
</ol>
</div>
<div class="imageblock reduce">
<div class="content">
<img src="/smallrye-mutiny/assets/images/philosophy-protocol.png" alt="philosophy protocol">
</div>
</div>
<div class="paragraph">
<p>The <code>request</code> event is the cornerstone of the back-pressure protocol.
A subscriber should not request more than what it can handle, and a publisher should not emit more items than the amount of request received.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Reactive Streams</div>
<div class="paragraph">
<p>Mutiny&#8217;s back-pressure is based on Reactive Streams.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Don&#8217;t forget to subscribe</div>
<div class="paragraph">
<p>If no subscriber <em>subscribes</em>, no items would be emitted.
More importantly, nothing will ever happen.
If your program does not do anything, check that it subscribes, it&#8217;s a very common error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="an-event-driven-api"><a class="anchor" href="#an-event-driven-api"></a>An event-driven API?</h3>
<div class="paragraph">
<p>Mutiny is an event-driven API.</p>
</div>
<div class="paragraph">
<p>For each type of event, there is an <code>on</code> associated method that lets you handle this specific event.
For example:</p>
</div>
<div class="listingblock">
<div class="title">The various types of events</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi&lt;String&gt; source = Multi.createFrom().items("a", "b", "c");
source
  .onItem() // Called for every item
    .invoke(item -&gt; log("Received item " + item))
  .onFailure() // Called on failure
    .invoke(failure -&gt; log("Failed with " + failure))
  .onCompletion() // Called when the stream completes
    .invoke(() -&gt; log("Completed"))
  .onSubscribe() // Called when the upstream is ready
    .invoke(subscription -&gt; log("We are subscribed!"))
  .onCancellation() // Called when the downstream cancels
    .invoke(() -&gt; log("Cancelled :-("))
  .onRequest() // Called on downstream requests
    .invoke(n -&gt; log("Downstream requested " + n + " items"))
  .subscribe()
    .with(item -&gt; log("Subscriber received " + item));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, the methods presented in this snippet are not very interesting, although they are quite useful to trace what&#8217;s going on.</p>
</div>
<div class="paragraph">
<p>You can see a common pattern emerging:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">onEvent().invoke(event -&gt; ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>invoke</code> is just one of the methods available.
Each <em>group</em> proposes methods specific to the type of event. For example, <code>onFailure().recover</code>, <code>onCompletion().continueWith</code> and so on.</p>
</div>
</div>
<div class="sect2">
<h3 id="uni-and-multi"><a class="anchor" href="#uni-and-multi"></a>Uni and Multi</h3>
<div class="paragraph">
<p>Mutiny defines two <em>reactive</em> types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Multi</code> - represents streams of <em>0..*</em> items (potentially unbounded)</p>
</li>
<li>
<p><code>Uni</code> - represents streams receiving either an item or a failure</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The Mutiny name comes from the contraction of <code>Multi</code> and <code>Uni</code> names
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Both <code>Uni</code> and <code>Multi</code> are asynchronous types.
They receive and fire events at any time.</p>
</div>
<div class="paragraph">
<p>You may wonder why we make the distinction between <code>Uni</code> and <code>Multi.</code>
Conceptually, a <code>Uni</code> is a <code>Multi,</code> right?</p>
</div>
<div class="paragraph">
<p>In practice, you don&#8217;t use <code>Unis</code> and <code>Multis</code> the same way.
The use cases and operations are different.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Uni</code> does not need the complete ceremony presented above as the <em>request</em> does not make sense.</p>
</li>
<li>
<p>The <code>subscribe</code> event expresses the interest and triggers the computation, no need for an additional <em>request</em>.</p>
</li>
<li>
<p><code>Uni</code> can handle items having a <code>null</code> value (and has specific methods to handle this case).</p>
</li>
<li>
<p><code>Multi</code> does not allow it (because the Reactive Streams specification forbids it).</p>
</li>
<li>
<p>Having a <code>Uni</code> implementing <code>Publisher</code> would be a bit like having <code>Optional</code> implementing <code>Iterable</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In other words, <code>Uni</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>can receive at most 1 <code>item</code> event, or a <code>failure</code> event</p>
</li>
<li>
<p>cannot receive a <code>completion</code> event (<code>null</code> in the case of 0 items)</p>
</li>
<li>
<p>cannot receive a <code>request</code> event</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following snippet shows how you can use <code>Uni</code> and <code>Multi</code>:</p>
</div>
<div class="listingblock">
<div class="title">Usage of Uni and Multi</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi.createFrom().items("a", "b", "c")
  .onItem().transform(String::toUpperCase)
  .subscribe().with(
    item -&gt; System.out.println("Received: " + item),
    failure -&gt; System.out.println("Failed with " + failure)
);

Uni.createFrom().item("a")
  .onItem().transform(String::toUpperCase)
  .subscribe().with(
    item -&gt; System.out.println("Received: " + item),
    failure -&gt; System.out.println("Failed with " + failure)
);</code></pre>
</div>
</div>
</div>
</div>
</div>
    </div>
    <div class="col-md-3 col-md-offset-1 toc-container" >
        <div class="page-toc affix-toc" data-offset-top="10" data-offset-bottom="200" data-spy="affix">
            <ul class="sectlevel1">
<li><a href="#concepts-philosophy">Concepts &amp; Philosophy</a>
<ul class="sectlevel2">
<li><a href="#why-is-asynchronous-important">Why is asynchronous important?</a></li>
<li><a href="#whats-reactive-programming">What&#8217;s Reactive Programming?</a></li>
<li><a href="#what-makes-mutiny-different">What makes Mutiny different?</a></li>
<li><a href="#events">Events?</a></li>
<li><a href="#an-event-driven-api">An event-driven API?</a></li>
<li><a href="#uni-and-multi">Uni and Multi</a></li>
</ul>
</li>
</ul>
        </div>
    </div>
</div>
 
</div>

            </div>
        </main>
        <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-9 sep-right">
                <p>
                    SmallRye Mutiny is an open source project. All the code from this project is available under the <a href="https://raw.githubusercontent.com/smallrye/smallrye-mutiny/master/LICENSE">Apache Software License 2.0</a>.
                </p>
                <p>
                    This website was built with <a href="https://jekyllrb.com/">Jekyll</a>, is hosted on Github Pages and is completely open source.
                    You can <a href="https://github.com/smallrye/smallrye-mutiny">fork it</a> and propose enhancements through pull-requests.
                </p>
                <p>
                    Something's wrong? Open an <a href="https://github.com/smallrye/smallrye-mutiny/issues">issue</a>.
                </p>
            </div>
            <div class="col-lg-3">
                <p>
                    Sponsored by
                    <span class="redhat-logo">
                        <a href="https://www.redhat.com/" target="_blank"><img src="/smallrye-mutiny/assets/images/redhat_reversed.svg"></a>
                    </span>
                </p>
                <p>
                    <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
                    |
                    <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
                </p>
                <p>
                     Site last generated: Feb 18, 2021
                </p>
            </div>
        </div>
    </div>
    <!-- Javascript-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/highlight.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/cferdinandi/gumshoe@4/dist/gumshoe.polyfills.min.js"></script>
    <script src="/smallrye-mutiny/assets/js/hl.js" type="text/javascript"></script>
    <script src="/smallrye-mutiny/assets/js/scrollspy.js" type="text/javascript"></script>

    <script>
        $(document).ready(function(){
            $("#search").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $(".guide").filter(function() {
                    $(this).toggle($(this).attr("data-search").toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FPQ70JF1EY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FPQ70JF1EY');
    </script>
</footer>
    </div>
</body>

</html>