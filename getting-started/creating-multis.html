<!doctype html>
<html lang="en">

<head>
    <title>SmallRye Mutiny</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="SmallRye Mutiny!">

    <link rel="canonical" href="/getting-started/creating-multis.html">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/styles/default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/components/icon.min.css" integrity="sha512-8Tb+T7SKUFQWOPIQCaLDWWe1K/SY8hvHl7brOH8Nz5z1VT8fnf8B+9neoUzmFY3OzkWMMs3OjrwZALgB1oXFBg==" crossorigin="anonymous" />
    <link rel="shortcut icon" type="image/png" href="/smallrye-mutiny/assets/images/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="/smallrye-mutiny/assets/css/main.css" />
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/font-awesome-line-awesome/css/all.min.css">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
</head>

<body>
    <div class="container-fluid global-container">
        





<header class="header masthead mb-auto">
    <div class="container">
        <nav class="navbar navbar-dark navbar-expand-lg">
            <a class="navbar-brand brand mutiny" href="/smallrye-mutiny/index.html"><strong>Mutiny!</strong></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#toggler"
                    aria-controls="toggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="toggler">
                <ul class="navbar-nav ml-auto mr-0 mt-2 mt-lg-0">
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/pages/philosophy">Philosophy</a></li>
                    <li class="nav-item"><a class="nav-link active" href="/smallrye-mutiny/getting-started/download">Getting started</a></li>
                    <li class="nav-item"><a class="nav-link " href="/smallrye-mutiny/guides">Guides</a></li>
                    <li class="nav-item"><a href="https://github.com/smallrye/smallrye-mutiny" target="_blank" title="Github"><i
                            class="lab la-github la-2x"></i></a></li>
                    <li class="nav-item"><a href="https://groups.google.com/d/forum/smallrye" target="_blank" title="SmallRye Google Group"><i
                            class="las la-at la-2x"></i></a></li>
                    <li class="nav-item"><a href="https://stackoverflow.com/questions/tagged/mutiny" target="_blank"
                                            title="Stack Overflow"><i
                            class="lab la-stack-overflow la-2x"></i></a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>
        <main>
            <div class="content">
                

    
    
        
        
        
    
        
        
        
    
        
        
        
    
        
        
        
    
        
            
            

    
        



<section class="hero gs">
    <div class="hero-main container">
        <div class="row">
            <div class="hero-left col-12">
                <div class="hero-slogan">
                    <h1 class="hero-name">Creating Multis</h1>
                </div>
                <div class="hero-desc">
                    Learn how to create Multi instances.
                </div>
                <div class="hero-buttons">
                    
                    <a href="/smallrye-mutiny/getting-started/creating-unis" class="getting-started-nav btn btn-rounded button button-dark button-rounded">
                        <i class="las la-arrow-left left"></i>&nbsp;Creating Unis</a>
                    
                    
                    <a href="/smallrye-mutiny/getting-started/observing-events" class="getting-started-nav btn btn-rounded button button-dark button-rounded">
                        Observing events&nbsp;<i class="las la-arrow-right"></i></a>
                    
                </div>
            </div>
        </div>
    </div>
</section>

<div class="container page-content">
    <div class="row">
        <div class="col-md-9 content">
            <div class="paragraph">
<p>A <code>Multi</code> represents a <em>stream</em> of data.
A stream can emit 0, 1, n, or an infinite number of items.</p>
</div>
<div class="paragraph">
<p>You will rarely create instances of <code>Multi</code> yourself but instead use a reactive client that exposes a Mutiny API.
Still, just like <code>Uni</code> there exists a rich API for creating <code>Multi</code> objects.</p>
</div>
<div class="sect1">
<h2 id="the-multi-type"><a class="anchor" href="#the-multi-type"></a>The Multi type</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>Multi&lt;T&gt;</code> is a data stream that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>emits <code>0..n</code> item events</p>
</li>
<li>
<p>emits a failure event</p>
</li>
<li>
<p>emits a completion event for bounded streams</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Failures are terminal events: after having received a failure no further item will be emitted.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>Multi&lt;T&gt;</code> provides many operators that create, transform, and orchestrate <code>Multi</code> sequences.
The operators can be used to define a processing pipeline.
The events flow in this pipeline, and each operator can process or transform the events.</p>
</div>
<div class="paragraph">
<p><code>Multis</code> are lazy by nature.
To trigger the computation, you must subscribe.</p>
</div>
<div class="paragraph">
<p>The following snippet provides a simple example of pipeline using <code>Multi</code>:</p>
</div>
<div class="listingblock">
<div class="title">Example of pipeline using Multi</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi.createFrom().items(1, 2, 3, 4, 5)
        .onItem().transform(i -&gt; i * 2)
        .select().first(3)
        .onFailure().recoverWithItem(0)
        .subscribe().with(System.out::println);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can see the <code>Multi</code> javadoc <a href="https://javadoc.io/static/io.smallrye.reactive/mutiny/0.14.0/index.html?io/smallrye/mutiny/Multi.html">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="subscribing-to-a-multi"><a class="anchor" href="#subscribing-to-a-multi"></a>Subscribing to a Multi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remember, if you don&#8217;t subscribe, nothing is going to happen.
Also, the pipeline is materialized for each <em>subscription</em>.</p>
</div>
<div class="paragraph">
<p>When subscribing to a <code>Multi,</code> you can pass an item callback (invoked when the item is emitted), or pass two callbacks, one receiving the item and one receiving the failure, or three callbacks to handle respectively the item, failure and completion events.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Cancellable cancellable = multi
        .subscribe().with(
                item -&gt; System.out.println(item),
                failure -&gt; System.out.println("Failed with " + failure),
                () -&gt; System.out.println("Completed"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the returned <code>Cancellable</code>: this object allows canceling the stream if need be.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-multi-from-items"><a class="anchor" href="#creating-multi-from-items"></a>Creating Multi from items</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many ways to create <code>Multi</code> instances.
Use <a href="https://javadoc.io/static/io.smallrye.reactive/mutiny/0.14.0/index.html?io/smallrye/mutiny/groups/MultiCreate.html">Multi.createFrom()</a> to see all the possibilities.</p>
</div>
<div class="paragraph">
<p>For instance you can create a <code>Multi</code> from known items or from an <code>Iterable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi&lt;Integer&gt; multiFromItems = Multi.createFrom().items(1, 2, 3, 4);
Multi&lt;Integer&gt; multiFromIterable = Multi.createFrom().iterable(Arrays.asList(1, 2, 3, 4, 5));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every subscriber receives the same set of items (<code>1</code>, <code>2</code>&#8230;&#8203; <code>5</code>) just after the subscription.</p>
</div>
<div class="paragraph">
<p>You can also use <code>Suppliers</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">AtomicInteger counter = new AtomicInteger();
Multi&lt;Integer&gt; multi = Multi.createFrom().items(() -&gt;
        IntStream.range(counter.getAndIncrement(), counter.get() * 2).boxed());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Supplier</code> is called for every subscriber, so each of them will get different values.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can create ranges using <code>Multi.createFrom().range(start, end)</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-failing-multis"><a class="anchor" href="#creating-failing-multis"></a>Creating failing Multis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Streams can also fail.
Failures are used to indicate to the downstream subscribers that the source encountered a terrible error and cannot continue emitting items.
Create failed <code>Multi</code> instances with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// Pass an exception directly:
Multi&lt;Integer&gt; failed1 = Multi.createFrom().failure(new Exception("boom"));

// Pass a supplier called for every subscriber:
Multi&lt;Integer&gt; failed2 = Multi.createFrom().failure(() -&gt; new Exception("boom"));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-empty-multis"><a class="anchor" href="#creating-empty-multis"></a>Creating empty Multis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unlike <code>Uni,</code> <code>Multi</code> streams don&#8217;t send <code>null</code> items (this is forbidden in <em>reactive streams</em>).</p>
</div>
<div class="paragraph">
<p>Instead <code>Multi</code> streams send completion events indicating that there are no more items to consume.
Of course, the completion event can happen even if there are no items, creating an empty stream.</p>
</div>
<div class="paragraph">
<p>You can create such a stream using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi&lt;String&gt; multi = Multi.createFrom().empty();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-multis-using-an-emitter-advanced"><a class="anchor" href="#creating-multis-using-an-emitter-advanced"></a>Creating Multis using an emitter (<em>advanced</em>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a <code>Multi</code> using an emitter.
This approach is useful when integrating callback-based APIs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi&lt;Integer&gt; multi = Multi.createFrom().emitter(em -&gt; {
    em.emit(1);
    em.emit(2);
    em.emit(3);
    em.complete();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The emitter can also send a failure.
It can also get notified of cancellation to, for example, stop the work in progress.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-multis-from-ticks-advanced"><a class="anchor" href="#creating-multis-from-ticks-advanced"></a>Creating Multis from <em>ticks</em> (<em>advanced</em>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a stream that emit a <em>ticks</em> periodically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Multi&lt;Long&gt; ticks = Multi.createFrom().ticks().every(Duration.ofMillis(100));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The downstream receives a <code>long,</code> which is a counter.
For the first tick, it&#8217;s 0, then 1, then 2, and so on.</p>
</div>
</div>
</div>
        </div>
        <div class="col-md-3 toc-container d-sm-none d-md-block">
            <nav class="page-toc toc nav sticky-top" id="toc">
                
                <h4>Table of Content</h4>
                <ul class="sectlevel1">
<li><a href="#the-multi-type">The Multi type</a></li>
<li><a href="#subscribing-to-a-multi">Subscribing to a Multi</a></li>
<li><a href="#creating-multi-from-items">Creating Multi from items</a></li>
<li><a href="#creating-failing-multis">Creating failing Multis</a></li>
<li><a href="#creating-empty-multis">Creating empty Multis</a></li>
<li><a href="#creating-multis-using-an-emitter-advanced">Creating Multis using an emitter (<em>advanced</em>)</a></li>
<li><a href="#creating-multis-from-ticks-advanced">Creating Multis from <em>ticks</em> (<em>advanced</em>)</a></li>
</ul>
                

                
            </nav>
        </div>
    </div>
</div>



<div class="footer-buttons gs ">
    <div class="container">
        <div class="row">
                
            <div class="col align-self-start">
                <a href="/smallrye-mutiny/getting-started/creating-unis" class="btn btn-rounded button button-dark button-rounded">
                    <i class="las la-arrow-left left"></i>&nbsp;Creating Unis</a>
            </div>
                

            <div class="col align-self-center text-center">
                <a href="/smallrye-mutiny/guides" class="btn btn-rounded button button-dark button-rounded">All Guides</a>
            </div>

            <div class="col align-self-end">
                
                <a href="/smallrye-mutiny/getting-started/observing-events" class="btn btn-rounded button button-dark button-rounded float-right">
                    Observing events&nbsp;<i class="las la-arrow-right"></i></a>
                
            </div>
        </div>

    </div>
</div>
            </div>
        </main>
        <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-9 sep-right">
                <p>
                    SmallRye Mutiny is an open source project. All the code from this project is available under the <a href="https://raw.githubusercontent.com/smallrye/smallrye-mutiny/master/LICENSE">Apache Software License 2.0</a>.
                </p>
                <p>
                    This website was built with <a href="https://jekyllrb.com/">Jekyll</a>, is hosted on Github Pages and is completely open source.
                    You can <a href="https://github.com/smallrye/smallrye-mutiny">fork it</a> and propose enhancements through pull-requests.
                </p>
                <p>
                    Something's wrong? Open an <a href="https://github.com/smallrye/smallrye-mutiny/issues">issue</a>.
                </p>
            </div>
            <div class="col-lg-3">
                <p>
                    Sponsored by
                    <span class="redhat-logo">
                        <a href="https://www.redhat.com/" target="_blank"><img src="/smallrye-mutiny/assets/images/redhat_reversed.svg"></a>
                    </span>
                </p>
                <p>
                    <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a>
                    |
                    <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
                </p>
                <p>
                     Site last generated: Feb 18, 2021
                </p>
            </div>
        </div>
    </div>
    <!-- Javascript-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/highlight.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/cferdinandi/gumshoe@4/dist/gumshoe.polyfills.min.js"></script>
    <script src="/smallrye-mutiny/assets/js/hl.js" type="text/javascript"></script>
    <script src="/smallrye-mutiny/assets/js/scrollspy.js" type="text/javascript"></script>

    <script>
        $(document).ready(function(){
            $("#search").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $(".guide").filter(function() {
                    $(this).toggle($(this).attr("data-search").toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FPQ70JF1EY"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FPQ70JF1EY');
    </script>
</footer>
    </div>
</body>

</html>